import{l as P}from"./chunk-GZYIXKYQ.js";import{a as R}from"./chunk-F4MG76PW.js";import"./chunk-CGMGQH6L.js";import{u as V,v as F}from"./chunk-IDKC7BFE.js";import{Ab as m,Ib as s,Jb as I,Kb as g,Oa as k,Pb as E,Qb as T,Sa as l,Ta as C,ca as S,ib as x,kb as f,ma as u,na as d,ob as v,pb as b,qb as y,rb as w,sb as a,tb as o,ub as p,xb as h,zb as _}from"./chunk-JTW2HSPL.js";import"./chunk-TMC7WMLO.js";var j=i=>["/checkout",i];function Q(i,c){if(i&1){let e=h();a(0,"div",4)(1,"h2",5),s(2,"Shop Cart :"),o(),a(3,"h5",6),s(4,"Total Cart Price: "),a(5,"b"),s(6),o()()(),a(7,"button",7),_("click",function(){u(e);let t=m();return d(t.resetCart())}),p(8,"i",8),s(9," Reset Cart"),o()}if(i&2){let e=m();l(6),g("",!(e.cartItems==null||e.cartItems.data==null)&&e.cartItems.data.totalCartPrice?e.cartItems.data.totalCartPrice:"0.0"," ")}}function U(i,c){if(i&1&&(a(0,"button",2),s(1,"Check Out"),o()),i&2){let e=m();f("routerLink",T(1,j,e.cartItems==null?null:e.cartItems.cartId))}}function L(i,c){if(i&1){let e=h();a(0,"div",9)(1,"div",10)(2,"div",11),p(3,"img",12),o(),a(4,"div",13)(5,"h2"),s(6),o(),a(7,"h3"),s(8),o(),a(9,"i",14),_("click",function(){let t=u(e).$implicit,r=m();return d(r.RemoveSpecificCartItem(t.product._id))}),o()(),a(10,"div",15)(11,"div",16)(12,"i",17),_("click",function(){let t=u(e).$implicit,r=m();return d(r.udateQuantity(t.product._id,t.count+1))}),o()(),a(13,"span",18),s(14),o(),a(15,"div",16)(16,"i",19),_("click",function(){let t=u(e).$implicit,r=m();return d(r.udateQuantity(t.product._id,t.count-1))}),o()()()()(),p(17,"hr",20)}if(i&2){let e=c.$implicit;l(3),f("src",e.product.imageCover,k)("title",e.product.title),l(3),I(e.product.title),l(2),g("Price ",e.price,""),l(6),I(e.count)}}function $(i,c){i&1&&p(0,"img",3)}var z=(()=>{let c=class c{constructor(n,t,r){this._CartService=n,this.toastr=t,this._Router=r,this.cartItemsCount=""}ngOnInit(){if(!localStorage.getItem("userToken")){this.toastr.error("User not logged in"),this._Router.navigate(["/login"]);return}localStorage.setItem("currentPage","/cart"),this.loadCart()}loadCart(){this._CartService.GetLoggedUserCart().subscribe({next:n=>{this.cartItems=n}})}udateQuantity(n,t){this._CartService.UpdateCartProductQuantity(n,t).subscribe({next:r=>{this.cartItems=r,this.toastr.success("Quantity updated successfully")}})}RemoveSpecificCartItem(n){this._CartService.RemoveSpecificCartItem(n).subscribe({next:t=>{this.cartItems=t,this.toastr.error("Item removed from cart successfully"),this._CartService.cartItem.next(t.numOfCartItems)}})}resetCart(){this._CartService.ClearUserCart().subscribe({next:n=>{this.cartItems=n,this.toastr.error("Cart reset successfully"),this._CartService.cartItem.next(0)}})}};c.\u0275fac=function(t){return new(t||c)(C(R),C(P),C(V))},c.\u0275cmp=S({type:c,selectors:[["app-cart"]],standalone:!0,features:[E],decls:7,vars:3,consts:[[1,"w-3/4","mx-auto","bg-slate-100","p-16","my-6"],[1,"flex","justify-evenly","items-center"],["type","button",1,"btn-main","block","mx-auto","my-4","w-1/4",3,"routerLink"],["src","./assets/images/green-cart-1243336210.jpg","alt","",1,"mt-10","w-72","block","mx-auto"],[1,"text-center"],[1,"mb-4","text-3xl"],[1,"text-main"],["type","button",1,"group","text-red-700","hover:text-white","border","border-red-700","hover:bg-red-800","focus:ring-4","focus:outline-none","focus:ring-red-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","me-2","mb-2","dark:border-red-500","dark:text-red-500","dark:hover:text-white","dark:hover:bg-red-600","dark:focus:ring-red-900",3,"click"],[1,"cursor-pointer","fa","fa-trash-alt","text-red-700","group-hover:text-white","me-1"],[1,"my-8"],[1,"flex","mx-auto","justify-center","items-center"],[1,"w-2/12"],["alt","",1,"w-44","m-4",3,"src","title"],[1,"w-7/12","ms-8"],[1,"cursor-pointer","fa","fa-trash-alt","text-red-700",3,"click"],[1,"w-3/12","flex","items-center"],[1,"group"],[1,"fa-solid","fa-plus-square","cursor-pointer","group-hover:text-green-400",3,"click"],[1,"mx-2"],[1,"fa-solid","fa-minus-square","cursor-pointer","group-hover:text-red-600",3,"click"],[1,"mx-auto","rounded"]],template:function(t,r){t&1&&(a(0,"div",0)(1,"div",1),x(2,Q,10,1),o(),x(3,U,2,3,"button",2),y(4,L,18,5,null,null,b,!1,$,1,0,"img",3),o()),t&2&&(l(2),v(2,!(r.cartItems==null||r.cartItems.data==null)&&r.cartItems.data.totalCartPrice?2:-1),l(),v(3,!(r.cartItems==null||r.cartItems.data==null)&&r.cartItems.data.totalCartPrice?3:-1),l(),w(r.cartItems==null||r.cartItems.data==null?null:r.cartItems.data.products))},dependencies:[F]});let i=c;return i})();export{z as CartComponent};
