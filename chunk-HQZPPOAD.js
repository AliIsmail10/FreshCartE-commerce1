import{a as e}from"./chunk-CGMGQH6L.js";import{j as l}from"./chunk-IDKC7BFE.js";import{O as o,T as n,Y as h,g as r}from"./chunk-JTW2HSPL.js";var b=(()=>{let i=class i{constructor(t){this._HttpClient=t,this.wishlistCountSubject=new r(0),this.wishlistCount$=this.wishlistCountSubject.asObservable(),typeof localStorage<"u"&&(this.userToken={token:localStorage.getItem("userToken")},this.loadWishlistCount())}loadWishlistCount(){this.GetLoggedUserWishlist().subscribe({next:t=>{this.wishlistCountSubject.next(t.count)}})}AddProductToWishlist(t){return this._HttpClient.post(`${e.baseUrl}/api/v1/wishlist`,{productId:t},{headers:this.userToken}).pipe(o(()=>{this.wishlistCountSubject.next(this.wishlistCountSubject.getValue()+1)}))}RemoveProductFromWishlist(t){return this._HttpClient.delete(`${e.baseUrl}/api/v1/wishlist/${t}`,{headers:this.userToken}).pipe(o(()=>{this.wishlistCountSubject.next(this.wishlistCountSubject.getValue()-1)}))}GetLoggedUserWishlist(){return this._HttpClient.get(`${e.baseUrl}/api/v1/wishlist`)}};i.\u0275fac=function(u){return new(u||i)(h(l))},i.\u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();export{b as a};
