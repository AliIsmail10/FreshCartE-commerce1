import{a as V}from"./chunk-HQZPPOAD.js";import{l as j}from"./chunk-GZYIXKYQ.js";import{a as P}from"./chunk-F4MG76PW.js";import"./chunk-CGMGQH6L.js";import{v as T}from"./chunk-IDKC7BFE.js";import{Ab as p,Db as W,Ib as c,Jb as u,Kb as F,Oa as _,Pb as L,Qb as E,Sa as o,Ta as d,ca as v,cb as w,ib as b,kb as g,ma as h,na as x,ob as C,pb as S,qb as k,rb as I,sb as a,tb as l,ub as m,xb as y,zb as f}from"./chunk-JTW2HSPL.js";import"./chunk-TMC7WMLO.js";var A=i=>["/productdetails",i];function $(i,n){i&1&&m(0,"i",13)}function D(i,n){if(i&1){let r=y();a(0,"div",1)(1,"div",2),f("click",function(){let t=h(r).$implicit,s=p();return x(s.removeFromWishList(t._id))}),m(2,"i",3),l(),a(3,"div",4),m(4,"div")(5,"img",5),a(6,"div",6)(7,"div")(8,"h5",7),c(9),l(),a(10,"h5",8),c(11),l()(),a(12,"div",9)(13,"span",10),c(14),l(),a(15,"i",11),c(16),l()()()(),a(17,"button",12),f("click",function(){let t=h(r).$implicit,s=p();return x(s.addProductToCard(t._id))}),b(18,$,1,0,"i",13),c(19," Add product"),l()()}if(i&2){let r=n.$implicit,e=p();W("title",r.title),o(3),g("routerLink",E(8,A,r._id)),o(2),g("src",r.imageCover,_),o(4),u(r.category.name),o(2),u(r.title.split(" ",4).join(" ")),o(3),F("",r.price," EGP"),o(2),u(r.ratingsAverage),o(2),C(18,e.isLoding?18:-1)}}var H=(()=>{let n=class n{constructor(e,t,s){this._WishlistService=e,this._CartService=t,this.toastr=s,this.wishlistItems=w([]),this.isLoding=!1}ngOnInit(){this._WishlistService.GetLoggedUserWishlist().subscribe({next:e=>{this.wishlistItems.set(e.data),console.log("this.wishlistItems :",this.wishlistItems)}})}addProductToCard(e){this.isLoding=!0,this._CartService.AddProducttoCart(e).subscribe({next:t=>{this.isLoding=!1,this.toastr.success(t.message),this._CartService.cartItem.next(t.numOfCartItems)}})}removeFromWishList(e){this._WishlistService.RemoveProductFromWishlist(e).subscribe({next:t=>{this.wishlistItems.update(s=>s.filter(z=>z._id!==e)),this.toastr.error(t.message)},error:t=>{console.error("Error removing product from wishlist: ",t)}})}};n.\u0275fac=function(t){return new(t||n)(d(V),d(P),d(j))},n.\u0275cmp=v({type:n,selectors:[["app-wishlist"]],standalone:!0,features:[L],decls:3,vars:0,consts:[[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-4","gap-4","container","w-10/12","mx-auto","my-10"],[1,"product","h-full","relative","group","w-full","max-w-sm","bg-white","border","border-gray-200","rounded-lg","shadow","dark:bg-gray-800","dark:border-gray-700","flex","flex-col",3,"title"],[1,"flex","items-center","mb-4","z-40",3,"click"],[1,"fa-regular","fa-heart","absolute","right-3","top-3","cursor-pointer","z-20","text-2xl","text-red-600"],[1,"",3,"routerLink"],["alt","product image",1,"p-8","rounded-t-lg",3,"src"],[1,"px-5","pb-5","flex-grow"],[1,"text-main","text-xl","font-semibold","tracking-tight","text-gray-900","dark:text-white"],[1,"text-sm","m-3","font-semibold","tracking-tight","text-gray-900","dark:text-white"],[1,"flex","items-center","justify-between"],[1,"text-1xl","font-bold","text-gray-900","dark:text-white"],[1,"fa-solid","fa-star","rating-color"],[1,"btn-main","mt-auto","m-3",3,"click"],[1,"fa","fa-spinner","fa-spin"]],template:function(t,s){t&1&&(a(0,"div",0),k(1,D,20,10,"div",1,S),l()),t&2&&(o(),I(s.wishlistItems()))},dependencies:[T]});let i=n;return i})();export{H as WishlistComponent};
